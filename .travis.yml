language: node_js

node_js:
- '0.12'

sudo: false

before_script:
- npm install -g gulp
- npm install -g bower

script:
- bower update
- npm test
- npm install --production
- gulp --cwd ./app/client --release

deploy:
  provider: elasticbeanstalk
  region: us-west-2
  app: permissive
  env: permissive-prod
  bucket_name: ats-travis
  bucket_path: permissive
  on:
    repo: atsid/permissive
    branch: master
    node: '0.12'